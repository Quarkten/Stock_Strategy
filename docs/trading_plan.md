# Structured Trading Plan

Version: 1.0  
Instrument: SPY (primary)  
Risk-per-trade: 0.5% of account equity  
Execution Style: Price-action first, discretionary with codified rules, RL alignment appendix for system consistency

--------------------------------------------------------------------------------

1. Philosophy and Mindset

1.1 Core Beliefs
- Trading is primarily self-mastery. Success = mastering fear, uncertainty, ego.
- Price action is the purest signal. Indicators are derivatives of price, time, volume.
- Assume you are wrong until proven right. Exit losses quickly.
- Embrace discomfort. Move toward risk when your process validates it.
- Add when you subtract, subtract when you add. Pyramid into winners, cut losers fast.

1.2 Behavioral Rules
- Process over outcome; judge decisions by adherence to plan, not P&L.
- Lose well: respect stops, reduce size after errors, reset quickly.
- One market, one plan, one day. Avoid impulsivity and overtrading.

--------------------------------------------------------------------------------

2. Market Framework and Trend Model

2.1 Structural Definitions
- Uptrend: series of Higher Highs (HH) and Higher Lows (HL)
- Downtrend: series of Lower Highs (LH) and Lower Lows (LL)
- Contraction (range): overlapping bars, mean reversion, failed expansions
- Expansion (trend): directional runs, shallow pullbacks, wide-range bars

2.2 Timeframe Stack
- Primary trend: 1H (dominant directional bias)
- Entry timeframe: 15m (precision location and triggers)
- Daily overlay: 20 EMA directional tilt; yesterday’s candle context

2.3 Bias Determination
- Baseline bias: Daily 20 EMA tilt and yesterday’s candle bias alignment
- Intraday confirmation: 1H structure in sync with daily tilt
- Trade direction: Only with dominant bias unless explicit scenario permits counter-trend scalps (default: disabled)

2.4 Trend-Day Recognition Checklist (Up/Down)
- Strong opening gap that does not fill in first hour
- Early wide-range bars in trend direction
- Shallow pullbacks (fib .382–.50), consolidation holding above (up) or below (down) .618
- Consolidations resolve in the direction of the initial drive
- Opening price acts as magnet early, then fails to attract after trend establishes

--------------------------------------------------------------------------------

3. Pattern Framework and Setups

3.1 Fibonacci and Harmonic Guides
- Retracements: .382, .50, .618, .786
- Extensions: 1.272, 1.618
- Use for entries, add-on placements, and partials (context dependent)

3.2 ICT-Aligned Price Action Constructs
- Liquidity Sweep: brief push beyond prior swing high/low followed by swift reversal
- Inverse FVG: prior imbalance later acting as S/R upon re-entry
- CSD (Change in State of Delivery): decisive close through prior sequence denoting control shift
- PDRA Alignment: bias-congruent discount (bull) or premium (bear) zones

3.3 Classical/Geometric Patterns
- AB=CD, Gartley 222, Butterfly, Three Drives (reversal/exhaustion)
- Double Top/Bottom (momentum shift risk point)
- Head & Shoulders (reversal with neckline confirmation)
- Engulfing candles (reversal/continuation trigger)
- 4-bar fractal turns (mechanical turning points)
- Fake-out/fake-down (stop runs into reversals)

3.4 Setup Schema (for every pattern)
- Definition: precise description of what it is
- Identification Checklist: objective, repeatable criteria
- Valid Context: when it should be preferred (trend vs range, position in swing)
- Invalidation: price levels/conditions that negate the setup
- Confirmation: secondary signals (engulf, liquidity sweep, PDRA, volume behavior)
- Location: alignment with HTF structure, fib zones, prior S/R

--------------------------------------------------------------------------------

4. Entry and Exit Playbook

4.1 1st Bar Positive (5-min lens for open)
- Conditions: First 5m bar bullish; if its low is later broken, short is valid (bearish read). Reverse logic for bearish 1st bar and long.
- Trigger: Break of first 5m bar’s low (for short), or high (for long)
- Stop: Above recent swing high (short) or below recent swing low (long)
- Management: No fixed targets; add on confirmation, trail via structure. Move stop to breakeven once initial risk is recovered.

4.2 Opening Price Retracement
- Context: Opening price often acts as a magnet in first 30–60 minutes
- Entry: If price trades above open then pulls back, look for .618/.786 retracement long; reverse for shorts
- Stop: Beyond structure (beyond D-leg or swing pivot)
- Management: Scale in only if confirmation persists; exit on structure failure or contrary CSD

4.3 Engulfing Patterns (tiers)
- Aggressive: enter prior to full confirmation at key level with smaller size
- Normal: enter on close of engulfing signal at zone
- Cautious: enter on next-bar confirmation after engulf
- Stop: Opposite side of engulfed range or key swing
- Management: Add when structure accelerates; subtract on weak follow-through

4.4 Fake-Out/Fake-Down Reversals
- Trigger: Sweep of prior high/low followed by strong reversal candle
- Stop: Beyond sweep extreme
- Management: Scale on re-tests of level or micro FVGs in new direction

4.5 4-Bar Fractal Turns
- Trigger: Confirmed local swing formation at key HTF level
- Stop: Beyond the fractal extreme
- Management: Trail under/over consecutive fractals in trend direction

4.6 Exit Strategy Principles
- Avoid rigid take-profit targets; let market dictate potential
- Move stop to breakeven after recovering initial risk
- Trail using structure (HL/LH ladder), micro FVGs, or PDRA levels
- Partial reductions acceptable at opposing liquidity pools or harmonic extensions

--------------------------------------------------------------------------------

5. Risk Management and Position Sizing

5.1 Hard Rules
- Always place a stop-loss at entry
- Risk per trade: 0.5% of account equity
- Daily max loss: 2R or 1.5% equity (whichever comes first) then stop for the day
- Skip trades where required stop implies risk > 0.5%

5.2 Sizing
- Position size = (0.005 * Equity) / StopDistance
- Optional ATR filter: if ATR volatility > threshold, reduce size by factor (e.g., 0.75)
- Add only to winners: new add-on each time structure advances and stop can be raised to lock prior risk

5.3 Add/Subtract Doctrine
- Add-on: after market proves right with new structure break or confirmation (e.g., CSD or inverse FVG)
- Subtract: at first sign of structural failure or weak follow-through; reduce to core size or exit

--------------------------------------------------------------------------------

6. Daily Routine and Mental Preparation

6.1 Premarket (8:00–9:15 AM ET)
- Review global markets, earnings, economic calendar (ForexFactory feed)
- Determine preliminary daily bias (macro + technical)
- Identify key levels: prior day H/L, overnight H/L, opening price zones, PDRA, FVGs
- Prepare scenarios (trend up/down, range, gap-and-go/fill)
- Set alerts; finalize A, B, C plans

6.2 Market Hours
- 9:30–10:15 AM: price discovery; respect opening magnet effects; 10:00 4H open behavior
  - Bullish bias: potential manipulation lower then distribution higher
  - Bearish bias: manipulation higher then distribution lower
- Execute only when bias-aligned and setup criteria met
- Never convert a losing day trade into an overnight hold

6.3 Post-Market
- Log all trades: entry/exit, screenshots, rationale, levels, emotions, adherence grade
- Update tracking sheets: MAE/MFE, R multiple, time-of-day, setup quality, add/subtract outcome
- Hand Charting: reinforce patterns and location memory
- Prepare watchlist and plan for next session

6.4 Mental Checklist (pre-trade)
- Rested? Emotionally stable? Ready to accept losses?
- Clear intent: specific scenario and trigger?
- Will you cut fast if wrong? Will you add when proven right?

--------------------------------------------------------------------------------

7. Scenario Playbooks

7.1 Trend Day Up
- Clues: strong open, shallow pullbacks, holding above .618
- Actions: buy pullbacks at .382–.50 in alignment with 1H; add on breakouts with structure; trail under HLs

7.2 Trend Day Down
- Clues: gap that fails to fill, lower highs, shallow bounces
- Actions: sell rallies into .382–.50; add on breakdowns; trail above LHs

7.3 Range Day
- Clues: overlapping bars, failed expansions
- Actions: fade extremes with tight stops and smaller size; be quicker to take risk off; prefer mean reversion signals

7.4 Gap-and-Go vs Gap-Fill
- Go: strong trend confirmation; enter with momentum pullbacks
- Fill: wait for retrace toward open/overnight value; fade with structure confirmation

7.5 News/Event Handling
- During high-impact events: reduce size or stand aside until structure re-forms
- Re-enter only with fresh structure and clear invalidation

7.6 Bias Invalidation/Flip Protocol
- If structure breaks against bias and confirmation appears (CSD), flatten
- If subsequent signals align, flip with base size; treat as new trade, not revenge

--------------------------------------------------------------------------------

8. Metrics, Review, and Continuous Improvement

8.1 KPIs
- Win rate, average R, expectancy
- MAE/MFE by setup; add-on effectiveness
- Time-of-day edge; slippage and execution quality
- Rule adherence score per trade

8.2 Review Cadence
- Daily: trade log and screenshots
- Weekly: aggregate stats, pattern quality, scenario efficacy
- Update hypotheses and backtest changes before integrating into live plan

--------------------------------------------------------------------------------

9. Governance: Discipline and Violations

9.1 Non-Negotiables
- Hard stop on every trade
- Max daily loss reached → stop trading
- No adding to losers; no overnighting losers
- No discretionary size increases beyond plan

9.2 Violations Protocol
- Log violation and cause
- Immediate cooldown (e.g., 30 minutes or end of day depending on severity)
- Specific corrective drill: replay, mark-up, or sim session
- Reaffirmation: write 3 bullet points of what will be done differently

--------------------------------------------------------------------------------

Appendix A: RL Alignment with Current System

A.1 System Overview (as per README and code)
- Timeframes: 1H for trend confirmation; 15m for entries
- Pattern detectors implemented: Liquidity Sweep, Inverse FVG (simplified), CSD, PDRA alignment
- Risk parameters in config: risk_per_trade default is 1.0%, adapt to plan’s 0.5% in runtime or configuration

A.2 Mapping Plan Concepts to Code Modules
- Intraday Strategy: src/strategies/intraday_strategy.py
  - evaluate_daily_bias_tjr_style(): daily tilt and 1H confirmation
  - detect_liquidity_sweep(): sweep classification
  - detect_inverse_fvg(): simplified imbalance logic
  - detect_csd(): control shift detection
  - align_pdra(): contextual zone alignment

A.3 RL Agent Role
- Signal filtering: use RL to confirm signals after plan’s base conditions pass
- Execution optimization: learn optimal add/subtract cadence and trailing approaches
- Adaptivity: retrain periodically to reflect updated scenario playbooks

A.4 Implementation Notes
- Set risk_per_trade to 0.005 in config/config.yaml or pass at runtime via strategy params
- Ensure logging captures all plan fields: setup type, context levels, trigger type, stop basis, add/subtract events, exit rationale
- Backtesting: evaluate KPIs defined in Section 8.1; prefer MAE/MFE distributions per setup

--------------------------------------------------------------------------------

Appendix B: Checklists

Premarket Checklist
- [ ] Macro/news reviewed; calendar events noted with times
- [ ] Daily EMA20 tilt assessed; yesterday’s candle read
- [ ] 1H structure aligned with daily tilt
- [ ] Key levels marked: prior H/L, ON H/L, open, PDRA, FVGs
- [ ] Scenarios prepared (trend up/down, range, gap play)
- [ ] Alerts set; risk-per-trade 0.5% verified

Entry Checklist
- [ ] Bias alignment with 1H and daily tilt
- [ ] Valid setup meets identification checklist and context
- [ ] Clear invalidation level; stop distance acceptable for 0.5% risk
- [ ] Trigger confirmed (engulf/sweep/structure break as defined)
- [ ] Size calculated; order type appropriate
- [ ] No conflicting higher-timeframe warning

Management Checklist
- [ ] Move to breakeven after risk recovered
- [ ] Add only on fresh confirmation and structure advancement
- [ ] Subtract on first sign of structure failure or weak follow-through
- [ ] Respect time-of-day dynamics (10:00 4H open behavior)

Post-Trade Checklist
- [ ] Log entry with screenshots and rationales
- [ ] Record MAE/MFE, R multiple, add/subtract notes
- [ ] Adherence grade and emotion notes
- [ ] Lessons and adjustments for next session

--------------------------------------------------------------------------------

Notes on Future Enhancements
- Refine FVG/PDRA detection to reduce subjectivity
- Extend to QQQ/NQ/ES with instrument-specific nuances
- Add volatility regime switching to sizing logic
- Expand RL features: context embeddings for scenario classification

End of Plan.